<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Recruit">
 	<select id="rec_getRef" resultType="int">
 		 SELECT IFNULL(MAX(REF),0)+1 FROM RECRUIT
 	</select>
	<insert id="rec_insert" parameterType="model.RecruitDto">
		INSERT INTO RECRUIT(COMSEQ, TITLE, COMJOB, COMJOBTYPE,
		MAINTASK, WORKINGFORM, REQUIREMENTS, SALARY,
 		CONTENT, HASHTAG, WDATE, EDATE, REF, READCOUNT, DEL)
		VALUES (#{comseq}, #{title}, #{comjob}, #{comjobtype},
		#{maintask}, #{workingform}, #{requirements}, #{salary},
		#{content}, #{hashtag}, NOW(), #{edate}, #{ref}, 0, 0)
	</insert>
	<insert id="rec_upfile" parameterType="model.FilesDto">
		INSERT INTO FILES (USETABLE, ORIGINNAME, NEWNAME, PATH, DEL, REF, STEP, FILETYPE )
		VALUES ( RECRUIT, #{originname}, #{newname}, #{path}, 0, #{ref}, #{step}, #{filetype} )
	</insert>
 </mapper>