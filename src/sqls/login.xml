<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Login">
<!-- 일반회원 이메일 체크 -->
<select id="emailCheckA" parameterType="model.AMemberDto" resultType="model.AMemberDto">
SELECT email
FROM A_MEMBER 
WHERE EMAIL = #{email} AND DEL != 1
</select>
<!-- 기업회원 이메일 체크 -->
<select id="emailCheckC" parameterType="model.CMemberDto" resultType="model.CMemberDto">
SELECT email
FROM C_MEMBER 
WHERE EMAIL = #{email} AND DEL != 1
</select>
<!-- 일반회원 로그인 정보(세션에 담을용) -->
 <select id="getLoginInfo" parameterType="model.AMemberDto" resultType="model.AMemberDto">
SELECT *
FROM A_MEMBER 
WHERE EMAIL = #{email}  AND DEL != 1
 </select>
 <!-- 일반회원가입 -->
 <select id="memberJoin">
 INSERT INTO A_MEMBER ( EMAIL, PASSWORD, NAME, DEL, SIGNDATE )
 VALUES ( #{email }, #{password}, #{name}, -1, SYSDATE() )
 </select>
<!-- 기업 로그인 정보(세션에 담을용) -->
 <select id="getLoginInfoForCompany" parameterType="model.CMemberDto" resultType="model.CMemberDto">
SELECT *
FROM C_MEMBER
WHERE EMAIL = #{email} AND DEL != 1
 </select>
<!-- 기업	 회원가입  -->
 <insert id="companyJoin" parameterType="model.CMemberDto">
 INSERT INTO C_MEMBER ( EMAIL, PASSWORD, PRESIDENT, NAME, DEPARTMENT, TYPE, NUMBER, TEL, DEL, SIGNDATE )
 VALUES ( #{email}, #{password}, #{president}, #{name}, #{department}, #{type}, #{number}, #{tel}, -1, SYSDATE() )
 </insert>
<!-- 일반 회원 이메일 인증 -->
<update id="AMemberValidate" parameterType="model.AMemberDto">
UPDATE A_MEMBER
SET DEL = 0 
WHERE EMAIL = #{email}
</update>
<!-- 기업 회원 이메일 인증 -->
<update id="CMemberValidate" parameterType="model.CMemberDto">
UPDATE C_MEMBER
SET DEL = 0 
WHERE EMAIL = #{email}
</update>
 
</mapper>



